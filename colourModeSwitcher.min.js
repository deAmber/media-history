localStorage.getItem("colourMode")||localStorage.setItem("colourMode","default"),localStorage.getItem("contrastMode")||localStorage.setItem("contrastMode","default"),window.siteColourMode={darkMode:!1,lightMode:!1,highContrastMode:!1,normalContrastMode:!1,browserDefaultColour:!0,browserDefaultContrast:!0},"default"!==localStorage.getItem("colourMode")&&(window.siteColourMode.browserDefaultColour=!1,"lightMode"===localStorage.getItem("colourMode")?window.siteColourMode.lightMode=!0:"darkMode"===localStorage.getItem("colourMode")&&(window.siteColourMode.darkMode=!0)),"default"!==localStorage.getItem("contrastMode")&&(window.siteColourMode.browserDefaultColour=!1,"highContrastMode"===localStorage.getItem("contrastMode")?window.siteColourMode.highContrastMode=!0:"normalContrastMode"===localStorage.getItem("contrastMode")&&(window.siteColourMode.normalContrastMode=!0));const pageColourModeSetup=()=>{"default"===localStorage.getItem("colourMode")&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: light)").matches?window.siteColourMode.lightMode=!0:window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches&&(window.siteColourMode.darkMode=!0)),window.siteColourMode.lightMode?document.body.classList.add("lightMode"):window.siteColourMode.darkMode&&document.body.classList.add("darkMode"),"default"===localStorage.getItem("contrastMode")&&(window.matchMedia&&window.matchMedia("(prefers-contrast: more)").matches?window.siteColourMode.highContrastMode=!0:window.siteColourMode.normalContrastMode=!0),window.siteColourMode.highContrastMode?document.body.classList.add("highContrastMode"):window.siteColourMode.normalContrastMode&&document.body.classList.add("normalContrastMode")};document.body?pageColourModeSetup():document.addEventListener("DOMContentLoaded",function(){pageColourModeSetup()});const handleColourModeChange=e=>{let o=document.body;switch(0>e.toLowerCase().indexOf("default")&&o.classList.add(e),window.siteColourMode[e]=!0,e){case"lightMode":window.siteColourMode.browserDefaultColour=window.siteColourMode.darkMode=!1,o.classList.remove("darkMode"),localStorage.setItem("colourMode",e);break;case"darkMode":window.siteColourMode.browserDefaultColour=window.siteColourMode.lightMode=!1,o.classList.remove("lightMode"),localStorage.setItem("colourMode",e);break;case"browserDefaultColour":window.siteColourMode.darkMode=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches,window.siteColourMode.lightMode=window.matchMedia&&window.matchMedia("(prefers-color-scheme: light)").matches,window.siteColourMode.browserDefaultColour=!0,localStorage.setItem("colourMode","default"),o.classList.remove("darkMode","lightMode"),o.classList.add(window.siteColourMode.lightMode?"lightMode":"darkMode");break;case"normalContrastMode":window.siteColourMode.highContrastMode=window.siteColourMode.browserDefaultContrast=!1,localStorage.setItem("contrastMode",e),o.classList.remove("highContrastMode");break;case"highContrastMode":window.siteColourMode.normalContrastMode=window.siteColourMode.browserDefaultContrast=!1,localStorage.setItem("contrastMode",e),o.classList.remove("normalContrastMode");break;case"browserDefaultContrast":window.siteColourMode.highContrastMode=window.matchMedia&&window.matchMedia("(prefers-contrast: more)").matches,window.siteColourMode.normalContrastMode=window.matchMedia&&!window.matchMedia("(prefers-contrast: more)").matches,window.siteColourMode.browserDefaultContrast=!0,localStorage.setItem("contrastMode","default"),o.classList.remove("highContrastMode","normalContrastMode"),o.classList.add(window.siteColourMode.normalContrastMode?"normalContrastMode":"highContrastMode")}dispatchEvent(new CustomEvent("SiteColourChange",{detail:{colour:e}}))};window.handleColourModeChange=handleColourModeChange;const browserChangeSetup=()=>{let e=window.matchMedia("(prefers-color-scheme: dark)");e.addEventListener("change",()=>{window.siteColourMode.browserDefaultColour&&handleColourModeChange("browserDefaultColour")});let o=window.matchMedia("(prefers-contrast: more)");o.addEventListener("change",()=>{window.siteColourMode.browserDefaultContrast&&handleColourModeChange("browserDefaultContrast")}),window.dispatchEvent(new CustomEvent("SiteColourChange",{detail:{colour:window.siteColourMode.browserDefaultColour?"browserDefaultColour":window.siteColourMode.lightMode?"lightMode":"darkMode"}})),window.dispatchEvent(new CustomEvent("SiteColourChange",{detail:{colour:window.siteColourMode.browserDefaultContrast?"browserDefaultContrast":window.siteColourMode.normalContrastMode?"normalContrastMode":"highContrastMode"}}))};"loading"===document.readyState?document.addEventListener("DOMContentLoaded",browserChangeSetup):browserChangeSetup(),addEventListener("SiteColourChange",function(){let e=(e,o,t)=>{let r=`data-${o?"darkmode":"lightmode"}${t?"-contrast":""}-src`;return e.getAttribute(r)?r:"data-default-src"};document.querySelectorAll("img[data-default-src]").forEach(o=>{o.setAttribute("src",o.getAttribute(e(o,window.siteColourMode.darkMode,window.siteColourMode.highContrastMode)))})});